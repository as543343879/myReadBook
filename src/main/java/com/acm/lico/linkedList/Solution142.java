package com.acm.lico.linkedList; /**
 142 ,ç¯å½¢é“¾è¡¨ II
 //ç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚
 //
 // å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°
 //é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚
 //
 // ä¸å…è®¸ä¿®æ”¹ é“¾è¡¨ã€‚
 //
 //
 //
 //
 //
 //
 // ç¤ºä¾‹ 1ï¼š
 //
 //
 //
 //
 //è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
 //è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹
 //è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
 //
 //
 // ç¤ºä¾‹ 2ï¼š
 //
 //
 //
 //
 //è¾“å…¥ï¼šhead = [1,2], pos = 0
 //è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹
 //è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
 //
 //
 // ç¤ºä¾‹ 3ï¼š
 //
 //
 //
 //
 //è¾“å…¥ï¼šhead = [1], pos = -1
 //è¾“å‡ºï¼šè¿”å› null
 //è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚
 //
 //
 //
 //
 // æç¤ºï¼š
 //
 //
 // é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ [0, 10â´] å†…
 // -10âµ <= Node.val <= 10âµ
 // pos çš„å€¼ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼•
 //
 //
 //
 //
 // è¿›é˜¶ï¼šä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ
 //
 // Related Topics å“ˆå¸Œè¡¨ é“¾è¡¨ åŒæŒ‡é’ˆ ğŸ‘ 2063 ğŸ‘ 0

 **/
/**
 1 å¤æ‚åº¦åˆ†æ
 ä¼°ç®—é—®é¢˜ä¸­å¤æ‚åº¦çš„ä¸Šé™å’Œä¸‹é™
 æ—¶é—´å¤æ‚åº¦
 ç©ºé—´å¤æ‚åº¦
 O(1) ä¸€ä¸ªå¸¸é‡ä¸‹å®Œæˆ
 O(n) ä¸€æ¬¡éå†
 O(logn) æŠ˜åŠæŸ¥è¯¢
 O(n^2) ä¸¤é‡åµŒå¥—å¾ªç¯æŸ¥è¯¢
 è‡ªå·±æ€è·¯ + å®˜æ–¹ï¼š
 æ—¶é—´å¤æ‚åº¦ O(n)
 ç©ºé—´å¤æ‚åº¦ O(1)
 2 å®šä½é—®é¢˜
 æ ¹æ®é—®é¢˜ç±»å‹ï¼Œç¡®å®šé‡‡ç”¨ä½•ç§ç®—æ³•æ€ç»´ã€‚
 ä¾‹å¦‚
 è¿™ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆç±»å‹ï¼ˆæ’åºã€æŸ¥æ‰¾ã€æœ€ä¼˜åŒ–ï¼‰çš„é—®é¢˜ï¼›
 è¿™ä¸ªé—®é¢˜çš„å¤æ‚åº¦ä¸‹é™æ˜¯å¤šå°‘ï¼Œå³æœ€ä½çš„æ—¶é—´å¤æ‚åº¦å¯èƒ½æ˜¯å¤šå°‘ï¼›
 é‡‡ç”¨å“ªäº›æ•°æ®ç»“æ„æˆ–ç®—æ³•æ€ç»´ï¼Œèƒ½æŠŠè¿™ä¸ªé—®é¢˜è§£å†³ã€‚
 è‡ªå·±æ€è·¯ + å®˜æ–¹ï¼š
 æ˜¯æ˜¯å¦èƒ½é‡åˆ
 a = èµ·ç‚¹åˆ°å…¥ç¯ç‚¹çš„è·ç¦»
 b = ç›¸é‡ç‚¹è·ç¦»
 c = ç›¸é‡ç‚¹ï¼Œåˆ°å…¥æ¢ç‚¹è·ç¦»
 fast = a + n(b + c ) b = a + b(n + 1) + nc
 slow = 2a + 2b
 fast = 2 slow
 a = c + (n - 1) (b+c)
 æ‰€ä»¥åˆ°äº†ç›¸é‡ç‚¹åï¼Œç„¶å èµ·ç‚¹ è·Ÿslowç‚¹ç›¸é‡ç‚¹å°±æ˜¯ å…¥å£ç‚¹ã€‚

 3 æ•°æ®æ“ä½œåˆ†æ
 æ ¹æ®å¢ã€åˆ ã€æŸ¥å’Œæ•°æ®é¡ºåºå…³ç³»å»é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œåˆ©ç”¨ç©ºé—´æ¢å–æ—¶é—´ã€‚

 4 ç¼–ç å®ç°

 5 æ‰§è¡Œç»“æœ
 > 2023/04/10 10:22:57
 è§£ç­”æˆåŠŸ:
 æ‰§è¡Œè€—æ—¶:0 ms,å‡»è´¥äº†100.00% çš„Javaç”¨æˆ·
 å†…å­˜æ¶ˆè€—:41.5 MB,å‡»è´¥äº†88.68% çš„Javaç”¨æˆ·

 */
//leetcode submit region begin(Prohibit modification and deletion)


import java.util.HashSet;
import java.util.Set;



//class ListNode {
//    int val;
//    ListNode next;
//    ListNode(int x) {
//        val = x;
//        next = null;
//    }
//}

public class Solution142 {
    /**
     1 å¤æ‚åº¦åˆ†æ
     ä¼°ç®—é—®é¢˜ä¸­å¤æ‚åº¦çš„ä¸Šé™å’Œä¸‹é™
     æ—¶é—´å¤æ‚åº¦ O(N)
     ç©ºé—´å¤æ‚åº¦ O(1)
     O(1) ä¸€ä¸ªå¸¸é‡ä¸‹å®Œæˆ
     O(n) ä¸€æ¬¡éå†
     O(logn) æŠ˜åŠæŸ¥è¯¢
     O(n^2) ä¸¤é‡åµŒå¥—å¾ªç¯æŸ¥è¯¢
     2 å®šä½é—®é¢˜
     æ ¹æ®é—®é¢˜ç±»å‹ï¼Œç¡®å®šé‡‡ç”¨ä½•ç§ç®—æ³•æ€ç»´ã€‚
     ä¾‹å¦‚
     è¿™ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆç±»å‹ï¼ˆæ’åºã€æŸ¥æ‰¾ã€æœ€ä¼˜åŒ–ï¼‰çš„é—®é¢˜ï¼›
     è¿™ä¸ªé—®é¢˜çš„å¤æ‚åº¦ä¸‹é™æ˜¯å¤šå°‘ï¼Œå³æœ€ä½çš„æ—¶é—´å¤æ‚åº¦å¯èƒ½æ˜¯å¤šå°‘ï¼›
     é‡‡ç”¨å“ªäº›æ•°æ®ç»“æ„æˆ–ç®—æ³•æ€ç»´ï¼Œèƒ½æŠŠè¿™ä¸ªé—®é¢˜è§£å†³ã€‚
     æ€è·¯ï¼š
     1. f æ˜¯å¿«æŒ‡é’ˆçš„æ­¥é€Ÿï¼Œ s æ˜¯æ»¡æŒ‡é’ˆçš„æ­¥é€Ÿã€‚ a å…¥å£èŠ‚ç‚¹ä¹‹å‰çš„é•¿åº¦ï¼Œ b æ˜¯å¾ªç¯åœ†ç¼º èŠ‚ç‚¹é•¿åº¦
     2. ç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™ f = 2s | f = s + nb  | ä¸¤ä¸ªç­‰å¼ç›¸å‡ã€‚  s = nb | f = 2nb ã€‚
     3. å…¥å£èŠ‚ç‚¹ k = a + nb ã€‚ ç„¶åslow ç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™ å·²ç»èµ°äº† nbã€‚ è®©ä»– ç»§ç»­èµ°aæ­¥ï¼Œ f ä¹Ÿèµ°a æ­¥ã€‚ ç›¸é‡çš„èŠ‚ç‚¹å°±æ˜¯ å¾ªç¯å…¥å£èŠ‚ç‚¹ã€‚
     3 æ•°æ®æ“ä½œåˆ†æ
     æ ¹æ®å¢ã€åˆ ã€æŸ¥å’Œæ•°æ®é¡ºåºå…³ç³»å»é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œåˆ©ç”¨ç©ºé—´æ¢å–æ—¶é—´ã€‚
     4 ç¼–ç å®ç°
     5 æ‰§è¡Œç»“æœ
     è§£ç­”æˆåŠŸ:
     æ‰§è¡Œè€—æ—¶:0 ms,å‡»è´¥äº†100.00% çš„Javaç”¨æˆ·
     å†…å­˜æ¶ˆè€—:42.9 MB,å‡»è´¥äº†5.22% çš„Javaç”¨æˆ·
     */
    public ListNode detectCycleNew20(ListNode head) {
        if(head == null) {
            return null;
        }
        ListNode fast = head;
        ListNode slow = head;
        do {
            if(fast == null || fast.next == null) {
                return null;
            }
            fast = fast.next.next;
            slow = slow.next;
        } while (fast != slow);

        fast = head;
        while (fast != slow) {
            slow = slow.next;
            fast = fast.next;
        }
        return fast;
    }
    public ListNode detectCycle(ListNode head) {
        if(head == null) {
            return null;
        }
        ListNode slow = head;
        ListNode fast = head;

        while (fast.next != null &&  fast.next.next != null ) {
            slow = slow.next;
            fast = fast.next.next;
            if(slow == fast) {
                ListNode start = head;
                while (start != slow) {
                    start = start.next;
                    slow = slow.next;
                }
                return start;
            }
        }
        return null;
    }

    /**
     *  5 æ‰§è¡Œç»“æœ
     *  æ‰§è¡Œç»“æœï¼š é€šè¿‡ æ˜¾ç¤ºè¯¦æƒ… æ·»åŠ å¤‡æ³¨ æ‰§è¡Œç”¨æ—¶ï¼š 4 ms ,
     *  åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº† 5.52% çš„ç”¨æˆ· å†…å­˜æ¶ˆè€—ï¼š 42 MB ,
     *  åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº† 19.43% çš„ç”¨æˆ· é€šè¿‡æµ‹è¯•ç”¨ä¾‹ï¼š 16 / 16
     * @param head
     * @return
     */
    public ListNode detectCycleOld(ListNode head) {
        Set<ListNode> nodeSet = new HashSet<>();
        while (head != null) {
            if (!nodeSet.contains(head)) {
                nodeSet.add(head);
            } else {
                return head;
            }
            head = head.next;
        }
        return null;
    }
}
//leetcode submit region end(Prohibit modification and deletion)
