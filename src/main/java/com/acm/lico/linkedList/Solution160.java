package com.acm.lico.linkedList; /**
 160 ,ç›¸äº¤é“¾è¡¨
 //ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headA å’Œ headB ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨ä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿”å› null ã€‚
 //
 // å›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ï¼š
 //
 //
 //
 // é¢˜ç›®æ•°æ® ä¿è¯ æ•´ä¸ªé“¾å¼ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ã€‚
 //
 // æ³¨æ„ï¼Œå‡½æ•°è¿”å›ç»“æœåï¼Œé“¾è¡¨å¿…é¡» ä¿æŒå…¶åŸå§‹ç»“æ„ ã€‚
 //
 // è‡ªå®šä¹‰è¯„æµ‹ï¼š
 //
 // è¯„æµ‹ç³»ç»Ÿ çš„è¾“å…¥å¦‚ä¸‹ï¼ˆä½ è®¾è®¡çš„ç¨‹åº ä¸é€‚ç”¨ æ­¤è¾“å…¥ï¼‰ï¼š
 //
 //
 // intersectVal - ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿™ä¸€å€¼ä¸º 0
 // listA - ç¬¬ä¸€ä¸ªé“¾è¡¨
 // listB - ç¬¬äºŒä¸ªé“¾è¡¨
 // skipA - åœ¨ listA ä¸­ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼‰è·³åˆ°äº¤å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹æ•°
 // skipB - åœ¨ listB ä¸­ï¼ˆä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼‰è·³åˆ°äº¤å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹æ•°
 //
 //
 // è¯„æµ‹ç³»ç»Ÿå°†æ ¹æ®è¿™äº›è¾“å…¥åˆ›å»ºé“¾å¼æ•°æ®ç»“æ„ï¼Œå¹¶å°†ä¸¤ä¸ªå¤´èŠ‚ç‚¹ headA å’Œ headB ä¼ é€’ç»™ä½ çš„ç¨‹åºã€‚å¦‚æœç¨‹åºèƒ½å¤Ÿæ­£ç¡®è¿”å›ç›¸äº¤èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä½ çš„è§£å†³æ–¹æ¡ˆå°†è¢« è§†
 //ä½œæ­£ç¡®ç­”æ¡ˆ ã€‚
 //
 //
 //
 // ç¤ºä¾‹ 1ï¼š
 //
 //
 //
 //
 //è¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,6,1,8,4,5], skipA = 2,
 //skipB = 3
 //è¾“å‡ºï¼šIntersected at '8'
 //è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚
 //ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,6,1,8,4,5]ã€‚
 //åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚
 //â€” è¯·æ³¨æ„ç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸ä¸º 1ï¼Œå› ä¸ºåœ¨é“¾è¡¨ A å’Œé“¾è¡¨ B ä¹‹ä¸­å€¼ä¸º 1 çš„èŠ‚ç‚¹ (A ä¸­ç¬¬äºŒä¸ªèŠ‚ç‚¹å’Œ B ä¸­ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹) æ˜¯ä¸åŒçš„èŠ‚ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬åœ¨å†…
 //å­˜ä¸­æŒ‡å‘ä¸¤ä¸ªä¸åŒçš„ä½ç½®ï¼Œè€Œé“¾è¡¨ A å’Œé“¾è¡¨ B ä¸­å€¼ä¸º 8 çš„èŠ‚ç‚¹ (A ä¸­ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒB ä¸­ç¬¬å››ä¸ªèŠ‚ç‚¹) åœ¨å†…å­˜ä¸­æŒ‡å‘ç›¸åŒçš„ä½ç½®ã€‚
 //
 //
 //
 //
 // ç¤ºä¾‹ 2ï¼š
 //
 //
 //
 //
 //è¾“å…¥ï¼šintersectValÂ = 2, listA = [1,9,1,2,4], listB = [3,2,4], skipA = 3, skipB =
 //1
 //è¾“å‡ºï¼šIntersected at '2'
 //è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚
 //ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [1,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚
 //åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚
 //
 //
 // ç¤ºä¾‹ 3ï¼š
 //
 //
 //
 //
 //è¾“å…¥ï¼šintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2
 //è¾“å‡ºï¼šnull
 //è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚
 //ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚
 //è¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› null ã€‚
 //
 //
 //
 //
 // æç¤ºï¼š
 //
 //
 // listA ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º m
 // listB ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º n
 // 1 <= m, n <= 3 * 10â´
 // 1 <= Node.val <= 10âµ
 // 0 <= skipA <= m
 // 0 <= skipB <= n
 // å¦‚æœ listA å’Œ listB æ²¡æœ‰äº¤ç‚¹ï¼ŒintersectVal ä¸º 0
 // å¦‚æœ listA å’Œ listB æœ‰äº¤ç‚¹ï¼ŒintersectVal == listA[skipA] == listB[skipB]
 //
 //
 //
 //
 // è¿›é˜¶ï¼šä½ èƒ½å¦è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ O(m + n) ã€ä»…ç”¨ O(1) å†…å­˜çš„è§£å†³æ–¹æ¡ˆï¼Ÿ
 //
 // Related Topics å“ˆå¸Œè¡¨ é“¾è¡¨ åŒæŒ‡é’ˆ ğŸ‘ 2063 ğŸ‘ 0

 **/
/**
 1 å¤æ‚åº¦åˆ†æ
 ä¼°ç®—é—®é¢˜ä¸­å¤æ‚åº¦çš„ä¸Šé™å’Œä¸‹é™
 æ—¶é—´å¤æ‚åº¦
 ç©ºé—´å¤æ‚åº¦
 O(1) ä¸€ä¸ªå¸¸é‡ä¸‹å®Œæˆ
 O(n) ä¸€æ¬¡éå†
 O(logn) æŠ˜åŠæŸ¥è¯¢
 O(n^2) ä¸¤é‡åµŒå¥—å¾ªç¯æŸ¥è¯¢

 è‡ªå·±æ€è·¯ï¼š
 æ—¶é—´å¤æ‚åº¦ O(N+M)
 ç©ºé—´å¤æ‚åº¦ O(1)
 2 å®šä½é—®é¢˜
 æ ¹æ®é—®é¢˜ç±»å‹ï¼Œç¡®å®šé‡‡ç”¨ä½•ç§ç®—æ³•æ€ç»´ã€‚
 ä¾‹å¦‚
 è¿™ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆç±»å‹ï¼ˆæ’åºã€æŸ¥æ‰¾ã€æœ€ä¼˜åŒ–ï¼‰çš„é—®é¢˜ï¼›
 è¿™ä¸ªé—®é¢˜çš„å¤æ‚åº¦ä¸‹é™æ˜¯å¤šå°‘ï¼Œå³æœ€ä½çš„æ—¶é—´å¤æ‚åº¦å¯èƒ½æ˜¯å¤šå°‘ï¼›
 é‡‡ç”¨å“ªäº›æ•°æ®ç»“æ„æˆ–ç®—æ³•æ€ç»´ï¼Œèƒ½æŠŠè¿™ä¸ªé—®é¢˜è§£å†³ã€‚
 è‡ªå·±æ€è·¯ï¼š
 hashè¡¨, ä¸€ä¸ªé“¾æ¥è¡¨å…ˆç”¨hashè¡¨å­˜èµ·æ¥ã€‚é¢–ä¸€ä¸ªå†éå† é”™è¯¯
 æ—¶é—´å¤æ‚åº¦ O(N+M)
 ç©ºé—´å¤æ‚åº¦ O(N)
 hashè¡¨ï¼Œ aèµ°å®Œï¼Œèµ°bï¼Œ bèµ°å®Œèµ°aã€‚ ç¬¬ä¸€ä¸ªç›¸é‡çš„å°±æ˜¯ äº¤ç‚¹ã€‚

 ä¸ç”¨hashè¡¨ï¼Œèµ°bï¼Œ bèµ°å®Œèµ°aã€‚ ç¬¬ä¸€ä¸ªç›¸é‡çš„å°±æ˜¯ äº¤ç‚¹ã€‚

 3 æ•°æ®æ“ä½œåˆ†æ
 æ ¹æ®å¢ã€åˆ ã€æŸ¥å’Œæ•°æ®é¡ºåºå…³ç³»å»é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œåˆ©ç”¨ç©ºé—´æ¢å–æ—¶é—´ã€‚
 4 ç¼–ç å®ç°
 5 æ‰§è¡Œç»“æœ
 è‡ªå·±æ€è·¯ï¼š hashè¡¨ï¼Œ aèµ°å®Œï¼Œèµ°bï¼Œ bèµ°å®Œèµ°aã€‚ ç¬¬ä¸€ä¸ªç›¸é‡çš„å°±æ˜¯ äº¤ç‚¹ã€‚
 è§£ç­”æˆåŠŸ:
 æ‰§è¡Œè€—æ—¶:7 ms,å‡»è´¥äº†9.46% çš„Javaç”¨æˆ·
 å†…å­˜æ¶ˆè€—:44.4 MB,å‡»è´¥äº†45.87% çš„Javaç”¨æˆ·

 è‡ªå·±æ€è·¯ ä¸ç”¨hashè¡¨
 è§£ç­”æˆåŠŸ:
 æ‰§è¡Œè€—æ—¶:1 ms,å‡»è´¥äº†97.86% çš„Javaç”¨æˆ·
 å†…å­˜æ¶ˆè€—:44.1 MB,å‡»è´¥äº†81.48% çš„Javaç”¨æˆ·
 */

/**
 * æ—§çš„
 *  1 å¤æ‚åº¦åˆ†æ
 * ä¼°ç®—é—®é¢˜ä¸­å¤æ‚åº¦çš„ä¸Šé™å’Œä¸‹é™
 *  æ—¶é—´å¤æ‚åº¦
 *  ç©ºé—´å¤æ‚åº¦
 *     O(1) ä¸€ä¸ªå¸¸é‡ä¸‹å®Œæˆ
 *     O(n) ä¸€æ¬¡éå†
 *     O(logn) æŠ˜åŠæŸ¥è¯¢
 *     O(n^2) ä¸¤é‡åµŒå¥—å¾ªç¯æŸ¥è¯¢
 *  2 å®šä½é—®é¢˜
 * æ ¹æ®é—®é¢˜ç±»å‹ï¼Œç¡®å®šé‡‡ç”¨ä½•ç§ç®—æ³•æ€ç»´ã€‚
 *  åŒæŒ‡é’ˆæ³•ã€‚
 *  hashè¡¨æ³•
 *  * è¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,6,1,8,4,5], skipA = 2, skipB = 3
 *  * å‡å¦‚ A æ˜¯ ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹
 *  * æ¥å…¥ B æ˜¯ ç¬¬å››ä¸ªèŠ‚ç‚¹
 *  *  t % 6 == 3 åœ¨äº¤ç‚¹
 *  *  t % 7 == 4 åœ¨äº¤ç‚¹ t == 39 çš„æ—¶å€™ æ»¡è¶³è¿ç®—ã€‚
 *     ä¾‹å¦‚
 *      è¿™ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆç±»å‹ï¼ˆæ’åºã€æŸ¥æ‰¾ã€æœ€ä¼˜åŒ–ï¼‰çš„é—®é¢˜ï¼›
 *      è¿™ä¸ªé—®é¢˜çš„å¤æ‚åº¦ä¸‹é™æ˜¯å¤šå°‘ï¼Œå³æœ€ä½çš„æ—¶é—´å¤æ‚åº¦å¯èƒ½æ˜¯å¤šå°‘ï¼›
 *      é‡‡ç”¨å“ªäº›æ•°æ®ç»“æ„æˆ–ç®—æ³•æ€ç»´ï¼Œèƒ½æŠŠè¿™ä¸ªé—®é¢˜è§£å†³ã€‚
 *  3 æ•°æ®æ“ä½œåˆ†æ
 *     æ ¹æ®å¢ã€åˆ ã€æŸ¥å’Œæ•°æ®é¡ºåºå…³ç³»å»é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œåˆ©ç”¨ç©ºé—´æ¢å–æ—¶é—´ã€‚
 *  4 ç¼–ç å®ç°
 *  5 æ‰§è¡Œç»“æœ
 *  æ‰§è¡Œç»“æœï¼š é€šè¿‡ æ˜¾ç¤ºè¯¦æƒ… æ·»åŠ å¤‡æ³¨
 *  æ‰§è¡Œç”¨æ—¶ï¼š 316 ms , åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº† 5.75% çš„ç”¨æˆ·
 *  å†…å­˜æ¶ˆè€—ï¼š 44.3 MB , åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº† 43.24% çš„ç”¨æˆ·
 *  é€šè¿‡æµ‹è¯•ç”¨ä¾‹ï¼š 39 / 39
 */
//leetcode submit region begin(Prohibit modification and deletion)

import com.acm.lico.linkedList.ListNode;

import java.util.HashSet;
import java.util.Set;


// class ListNode {
//    int val;
//    ListNode next;
//    ListNode(int x) {
//        val = x;
//        next = null;
//    }
//}

public class Solution160 {

    /**
     * old
     *  æ‰§è¡Œç»“æœï¼š é€šè¿‡ æ˜¾ç¤ºè¯¦æƒ… æ·»åŠ å¤‡æ³¨
     *  æ‰§è¡Œç”¨æ—¶ï¼š 316 ms , åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº† 5.75% çš„ç”¨æˆ·
     *  å†…å­˜æ¶ˆè€—ï¼š 44.3 MB , åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº† 43.24% çš„ç”¨æˆ·
     * @param headA
     * @param headB
     * @return
     */
    public ListNode getIntersectionNodeOld(ListNode headA, ListNode headB) {
        ListNode tempA = headA;
        ListNode tempB = headB;
        int count = 0;
        while (tempA != tempB) {
            count++;
            tempA = tempA == null ? headA : tempA.next;
            tempB = tempB == null ? headB : tempB.next;
        }
        System.out.println(count);
        return tempA;
    }
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {

        boolean aisNulled = false, bisNulled = false;
        ListNode tempA = headA, tempB = headB;
        while (headA != null && headB != null) {
            if(headA == headB) {
                return headA;
            }
            headA = headA.next;
            headB = headB.next;
            if(headA == null && !aisNulled) {
                aisNulled = true;
                headA = tempB;
            }
            if(headB == null && ! bisNulled) {
                bisNulled = true;
                headB = tempA;
            }

        }

        return null;
    }

    /**
     *  5 æ‰§è¡Œç»“æœ
     *  è‡ªå·±æ€è·¯ï¼š hashè¡¨ï¼Œ aèµ°å®Œï¼Œèµ°bï¼Œ bèµ°å®Œèµ°aã€‚ ç¬¬ä¸€ä¸ªç›¸é‡çš„å°±æ˜¯ äº¤ç‚¹ã€‚
     *      è§£ç­”æˆåŠŸ:
     *      æ‰§è¡Œè€—æ—¶:7 ms,å‡»è´¥äº†9.46% çš„Javaç”¨æˆ·
     *      å†…å­˜æ¶ˆè€—:44.4 MB,å‡»è´¥äº†45.87% çš„Javaç”¨æˆ·
     * @param headA
     * @param headB
     * @return
     */
    public ListNode getIntersectionNode3(ListNode headA, ListNode headB) {
        Set<ListNode> set = new HashSet<>();
        boolean isFast = true;
        while (headA != null) {
            boolean addRes = set.add(headA);
            if(!addRes) {
                return headA;
            }
            headA = headA.next;
            if(headA == null && isFast) {
                isFast = false;
                headA = headB;
            }
        }
        return null;
    }
    /**
     * æ²¡çœ‹æ¸…é¢˜ç›®ï¼Œæ€è·¯é”™è¯¯
     * @param headA
     * @param headB
     * @return
     */
    public ListNode getIntersectionNode2(ListNode headA, ListNode headB) {
        Set<Integer> set = new HashSet<>();
        if(headA != null) {
            headA  = headA.next;
        }
        while (headA.next != null) {
            Integer val = headA.val;
            if(val!= 1) {
                set.add(val);
            }

            headA = headA.next;
        }


        ListNode res = null;
        while (headB != null) {
            Integer value = headB.val;
            if(set.contains(value)) {
                res = headB;
                break;
            }
            headB = headB.next;

        }


        return res;
    }
}
//leetcode submit region end(Prohibit modification and deletion)
